{% load i18n %}
{% load core_tags %}
{% load adminmedia %}
{% load thumbnail %}
{% load macros %}
{% load postman_tags %}
{% load tagmeta_tags %}

{% set_default_tagged_model %}

{% macro title %}{% block title %}Installables{% endblock %}{% endmacro %}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="{{ LANGUAGE_CODE }}" xml:lang="{{ LANGUAGE_CODE }}" {% if LANGUAGE_BIDI %}dir="rtl"{% endif %}>
	<head>
		<title>{% block pagetitle %}{% if title %}{{ title }}{% else %}{% usemacro title %}{% endif %}{% endblock %} | {{ site.name }}&trade; {{ site.slogan }}</title>
		<link rel="icon" href="{{ MEDIA_URL }}img/favicon.ico" type="image/x-icon" />
		<link rel="shortcut icon" href="{{ MEDIA_URL }}img/favicon.ico" type="image/x-icon" />

		<meta name="google-site-verification" content="6DVvgdOMFUgd9LVuQWMZNGwCZzqrH0PR2Xb6FsvhXPo" />
        <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" />
        <meta name="keywords" content="software,download,open source,scientific,research,education,metabolomics,metabolic,metapath">
        <meta name="description" content="Open Source scientific, research and educational software.">
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600,300italic,300,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}foundation/stylesheets/foundation.min.css" />
        <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}foundation/webicons/fc-webicons.css" />

        <script src="{{ MEDIA_URL }}foundation/javascripts/modernizr.foundation.js"></script>

		<!-- Base CSS --><link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/base.css" />
        <!-- Subdomain CSS --><link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/subdomains/{{ request.subdomain }}.css" />

        <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/general_foundicons.css" />
        <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/social_foundicons.css" />

		<!-- Pygments Syntax highlighting CSS -->
        <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/pygments.css" />

		{% block %rss %}{% endblock %}
		{% block extrastyle %}{% endblock %}
		<!--[if lte IE 7]><link rel="stylesheet" type="text/css" href="{% block stylesheet_ie %}{% load adminmedia %}{% admin_media_prefix %}css/ie.css{% endblock %}" /><![endif]-->
		{% if LANGUAGE_BIDI %}<link rel="stylesheet" type="text/css" href="{% block stylesheet_rtl %}{% admin_media_prefix %}css/rtl.css{% endblock %}" />{% endif %}

        {% block extrahead %}
	    {% endblock %}

        {% if not user.is_staff %}
            <script type="text/javascript">

              var _gaq = _gaq || [];
              _gaq.push(['_setAccount', 'UA-341253-5']);
              _gaq.push(['_setDomainName', 'abl.es']);
              _gaq.push(['_trackPageview']);

              (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
              })();

            </script>
        {% endif %}

</head>
	
<body class="{% if is_popup %}popup {% endif %}{% block bodyclass %}{% endblock %}">
{% block forkme %}{% endblock %}

<div class="notfixed contain-to-grid">
    <!-- Basic Needs -->
    <nav class="top-bar">
      <ul>

        <li class="name"><h1><a href="/">{% colorname site.name %}</h1></li>
        <li class="toggle-topbar"><a href="#"></a></li>
      </ul>
    <section>
      <ul class="right">
        <li><a href="{% url 'about' None %}">About</a></li>
        <li><a href="{% url 'blog' None %}">Blog</a></li>

        <li class="has-dropdown">
          <a href="{% url 'application-list' subdomain='install' %}">Software</a>

          <ul class="dropdown">
            {% for application in all_applications %}
                <li><a href="{% url 'application' application_slug=application.slug subdomain='install' %}">{{ application.name }}</a></li>
            {% endfor %}
          </ul>

        </li>

        <li><a href="{% url 'method-list' subdomain='do' %}">Protocols</a></li>

		{% if user.get_profile %}
        {% postman_unread as unread_count %}
            <li class="has-dropdown">
              <a href="#">{% trans "Welcome," %}
                {% firstof user.first_name user.username %} {% if unread_count %} <span class="label">{{ unread_count }}</span>{% endif %}</a>

                 <ul class="dropdown">
                    <li><a href="{% url 'postman_inbox' subdomain=None %}">{% trans "Inbox" %}</a>  {% if unread_count %} <span class="label">{{ unread_count }}</span>{% endif %}</li>
                    <li><a href="{% url 'user-profile' user_id=user.id  subdomain=None %}">{% trans "Profile" %}</a></li>
                    <li class="divider"></li>
                    <li> <a href="{% url 'logout' subdomain=None %}?next=/">
			        {% trans 'Sign out' %}</a></li>
                </ul>

            </li>
		{% else %}
            <li><a href="{% url 'login' subdomain=None %}" onclick="$('#modal-login').modal('show'); return false;">{% trans "Sign in" %}</a></li>
            <li><a href="{% url 'registration_register' subdomain=None  %}">{% trans "Register" %}</a></li>
        {% endif %}

        <li><a href="{% url 'contact' None %}">Contact</a></li>
      </ul>

    </section>

    </nav>

</div>

{% block imageheader %}{% endblock %}

  <div class="header {% block header_classes %}{% endblock %}">
      <div class="row">
        <div class="twelve columns header-content">
            <h1 itemprop="name">{% usemacro title %}</h1>
            <h4>{% block subtitle %}{{ site.slogan }}{% endblock %}</h4>
        </div>
        </div>
  </div>

<div class="content-header">
{% block content_header %}
{% endblock %}
</div>
 
<div class="body"><a name="top"></a>
{% block layout %}
  <div class="row">
    <div class="twelve columns">
        {% block content %}
        {% endblock %}
    </div>
  </div>
{% endblock %}
</div>

  <div class="footer">
      <div class="row footer-top">
        <div class="five columns">
        <h6>Made by abl.es</h6>
        <p>An open science project based in Birmingham, United Kingdom.
         <a href="{% url 'about' None %}">Find out more &rarr;</a></p>
        </div>

        <div class="three columns">
        <h6>Using our stuff?</h6>
        <p>Let us know and we'll feature you on our site! <a href="{% url 'contact' None %}">Get in touch &rarr;</a></p>
        </div>

        <div class="four columns">
        <h6>Want to know more?</h6>
            <dl>
                <dd><i class="general foundicon-idea"></i> <a href="{% url 'faq' None %}">Read the FAQ &rarr;</a></dd>
                <dd><i class="social foundicon-twitter"></i> <a href="http://twitter.com/#!/_ables_" target="_blank">Follow us on Twitter &rarr;</a></dd>
                <!-- <li><i class="social foundicon-facebook"></i> <a href="http://facebook.com/_ables_">Find us on Facebook â†’</a></li> -->
            </dl>
        </div>

      </div>


{% block footer_content %}
<div class="footer-content">

    <div class="row">
    <div class="four columns">
        <h6>Latest updates</h6>
        <ul class="navlist">
        {% for object in top5s.latest %}
            <li>
                <span class="label radius label-{{ object|classname|lower }}">{{ object.updated_at|verybrieftimesince }}</span>&nbsp; 
                {% if object|classname = 'Application' %}<a href="{% url 'application' application_slug=object.slug subdomain='install' %}">{{ object }} <i>{{ object.tagline }}</i></a>{% else %}
                {% if object|classname = 'Article' %}<a href="{% url 'article' article_id=object.id article_slug=object.slug subdomain=None %}">{{ object }}</a>{% else %}
                {% if object|classname = 'Method' %}<a href="{% url 'method' method_id=object.id method_slug=object.slug subdomain='do' %}"">{{ object }}</a>
                {% endif %} {% endif %} {% endif %}         
            </li>
        {% endfor %}
        </ul>
    </div>

    <div class="four columns">
        <h6>Trending</h6>
        <ul class="navlist">
        {% for object in top5s.trending %}
            <li>
                <span class="label radius label-{{ object|classname|lower }}">{{ object.hit_count }}</span>&nbsp; 
                {% if object|classname = 'Application' %}<a href="{% url 'application' application_slug=object.slug subdomain='install' %}">{{ object }} <i>{{ object.tagline }}</i></a>{% else %}
                {% if object|classname = 'Article' %}<a href="{% url 'article' article_id=object.id article_slug=object.slug subdomain=None %}">{{ object }}</a>{% else %}
                {% if object|classname = 'Method' %}<a href="{% url 'method' method_id=object.id method_slug=object.slug subdomain='do' %}"">{{ object }}</a>
                {% endif %} {% endif %} {% endif %}                       
            </li>
        {% endfor %}
        </ul>
    </div>

    <div class="four columns">
        <h6>Most viewed</h6>
        <ul class="navlist">
        {% for object in top5s.views %}
            <li>
                <span class="label radius label-{{ object|classname|lower }}">{{ object.hit_count }}</span>&nbsp; 
                {% if object|classname = 'Application' %}<a href="{% url 'application' application_slug=object.slug subdomain='install' %}">{{ object }} <i>{{ object.tagline }}</i></a>{% else %}
                {% if object|classname = 'Article' %}<a href="{% url 'article' article_id=object.id article_slug=object.slug subdomain=None %}">{{ object }}</a>{% else %}
                {% if object|classname = 'Method' %}<a href="{% url 'method' method_id=object.id method_slug=object.slug subdomain='do' %}"">{{ object }}</a>
                {% endif %} {% endif %} {% endif %}      
            </li>
        {% endfor %}
        </ul>
    </div>

    </div>

</div>

{% endblock %}

      <div class="row footer-bottom">
        <div class="six columns">Site content &copy;2012-{% now "Y" %} <a href="http://abl.es">abl.es</a> &bull; Licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC-BY</a> and <a href="http://www.gnu.org/licenses/gpl-3.0.html">GPLv3</a></div>
        <div class="six columns" style="text-align:right;">
            <a href="{% url 'home' %}">Home</a> &bull;
            <a href="{% url 'faq' None %}">FAQ</a> &bull;
            <a href="#top">Top &uarr;</a>
       <!--     <a href="{ % url 'statistics' None % }">Statistics</a> &bull; -->
        </div>
      </div>
  </div>

{% block modals %}{% endblock %}

    <script src="{{ MEDIA_URL }}foundation/javascripts/jquery.js"></script>
    <script type="text/javascript">
        $(function() {
            // Javascript support enabled, initialise document
            function getCookie(name) {
                var cookieValue = null;
                if (document.cookie && document.cookie != '') {
                    var cookies = document.cookie.split(';');
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = jQuery.trim(cookies[i]);
                        // Does this cookie string begin with the name we want?
                        if (cookie.substring(0, name.length + 1) == (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
            var csrftoken = getCookie('csrftoken');
            //document.domain = '{{ default_host }}';
            function csrfSafeMethod(method) {
                // these HTTP methods do not require CSRF protection
                return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
            }
            $.ajaxSetup({
                crossDomain: false, // obviates need for sameOrigin test
                beforeSend: function(xhr, settings) {
                    if (!csrfSafeMethod(settings.type)) {
                        xhr.setRequestHeader("X-CSRFToken", csrftoken);
                    }
                }
            });
        }
    </script>
  <!-- Included JS Files (Minified) -->
  <script src="{{ MEDIA_URL }}foundation/javascripts/foundation.min.js"></script>
  <!-- Initialize JS Plugins -->
  <script src="{{ MEDIA_URL }}foundation/javascripts/app.js"></script>

{% block extrajs %}{% endblock %}
</body>
</html>
